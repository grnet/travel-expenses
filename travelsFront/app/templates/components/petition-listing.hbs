{{#component wrapper as |row|}}
{{#row.cell class="icon-cell"}}
{{#if (can "approve petition")}}
  {{#if (or (eq petition.status 2) (eq petition.status 3))}}
    {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton=true confirm=false}}
  {{else if (eq petition.status 4)}}
    {{list-action action=(action "undo" petition) icon='undo' tooltip-message=(t 'tooltip_undo') iconButton=true confirm=true promptTitle=(t 'prompt_undo_title') promptMessage=(t 'prompt_undo_message')}}
    {{list-action action=(action "pdf" petition "1") icon='file_download' tooltip-message=(t 'pdf_travel_application') iconButton=true confirm=false}}
    {{list-action action=(action "pdf" petition "2") icon='file_download' tooltip-message=(t 'pdf_travel_decision') iconButton=true confirm=false}}
    {{list-action action=(action "approve" petition) icon='done' tooltip-message=(t 'travel_presidentApproval') iconButton=true confirm=true promptTitle=(t 'prompt_done_title') promptMessage=(t 'prompt_done_message')}}
  {{/if}}
{{else if (can "managerApprove petition")}}
  {{#if (and (lte petition.status 3) (eq petition.needsApproval false))}}
    {{list-action action=(action "managerApproval" petition) icon='done' tooltip-message=(t 'travel_managerApproval') iconButton=true confirm=true promptTitle=(t 'prompt_approve_title') promptMessage=(t 'prompt_approve_message')}}
  {{/if}}
  {{#if (eq petition.status 1)}}
    {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton= true confirm=false}}
    {{list-action action=(action "del" petition) icon='delete_forever' warn=true tooltip-message=(t 'tooltip_delete') iconButton=true confirm=true promptTitle=(t 'prompt_delete_title') promptMessage=(t 'prompt_delete_message')}}
  {{else if (or (eq petition.status 5) (eq petition.status 6))}}
    {{#if (eq petition.tax_reg_num account.user.tax_reg_num)}}
      {{list-action action=(action "pdf" petition "3") icon='file_download' tooltip-message=(t 'pdf_compensation_application') iconButton=true confirm=false}}
      {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton= true confirm=false}}
    {{/if}}
  {{else if (or (eq petition.status 2) (eq petition.status 7))}}
    {{#if (eq petition.tax_reg_num account.user.tax_reg_num)}}
      {{list-action action=(action "undo" petition) icon='undo' tooltip-message=(t 'tooltip_undo') iconButton=true confirm=true promptTitle=(t 'prompt_undo_title') promptMessage=(t 'prompt_undo_message')}}
    {{/if}}
  {{/if}}  
{{!--   {{#if (and (gte petition.status 4) (eq petition.needsCostApproval false))}}
    {{list-action action=(action "managerCostApproval" petition) icon='euro_symbol' tooltip-message=(t 'travel_managerCostApproval') iconButton=true confirm=true promptTitle=(t 'prompt_cost_approve_title') promptMessage=(t 'prompt_cost_approve_message')}}
  {{/if}} --}}
{{else if (can "compensate petition")}}
  {{#if (or (eq petition.status 7) (eq petition.status 8))}}
    {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton=true confirm=false}}
  {{else if (eq petition.status 9)}}
    {{list-action action=(action "undo" petition) icon='undo' tooltip-message=(t 'tooltip_undo') iconButton=true confirm=true promptTitle=(t 'prompt_undo_title') promptMessage=(t 'prompt_undo_message')}}
    {{list-action action=(action "pdf" petition "3") icon='file_download' tooltip-message=(t 'pdf_compensation_application') iconButton=true confirm=false}}
    {{list-action action=(action "pdf" petition "4") icon='file_download' tooltip-message=(t 'pdf_compensation_decision') iconButton=true confirm=false}}
    {{list-action action=(action "approve" petition) icon='done' tooltip-message=(t 'compensation_presidentApproval') iconButton=true confirm=true promptTitle=(t 'prompt_done_title') promptMessage=(t 'prompt_done_message')}}
  {{/if}}
{{else if (can "see petition")}}
  {{#if (eq petition.status 1)}}
    {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton= true confirm=false}}
    {{list-action action=(action "del" petition) icon='delete_forever' warn=true tooltip-message=(t 'tooltip_delete') iconButton=true confirm=true promptTitle=(t 'prompt_delete_title') promptMessage=(t 'prompt_delete_message')}}
  {{else if (or (eq petition.status 5) (eq petition.status 6))}}
    {{list-action action=(action "pdf" petition "3") icon='file_download' tooltip-message=(t 'pdf_compensation_application') iconButton=true confirm=false}}
    {{list-action action=(action "edit" petition) icon='create' tooltip-message=(t 'tooltip_edit')  iconButton= true confirm=false}}
  {{else if (or (eq petition.status 2) (eq petition.status 7))}}
    {{list-action action=(action "undo" petition) icon='undo' tooltip-message=(t 'tooltip_undo') iconButton=true confirm=true promptTitle=(t 'prompt_undo_title') promptMessage=(t 'prompt_undo_message')}}
  {{/if}}
{{/if}}
{{/row.cell}}
{{#row.cell}}{{petition.dse}}{{/row.cell}}
{{#row.cell}}{{petition.first_name}}{{/row.cell}}
{{#row.cell}}{{petition.last_name}}{{/row.cell}}
{{#row.cell}}{{petition.project.name}}{{/row.cell}}
{{#row.cell}}{{petition.travel_info.firstObject.arrival_point.name}}{{/row.cell}}
{{#row.cell}}{{to-date petition.created}}{{/row.cell}}
{{#row.cell}}{{to-date petition.updated}}{{/row.cell}}
{{#row.cell}}{{to-date petition.travel_info.firstObject.depart_date}}{{/row.cell}}
{{#row.cell}}{{to-date petition.travel_info.firstObject.return_date}}{{/row.cell}}
{{#row.cell}}{{petition.status_label}}{{/row.cell}}
{{#row.cell}}{{petition.total_cost}}{{/row.cell}}
{{/component}}
